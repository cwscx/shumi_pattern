{% extends 'base.html' %}
{% load static %}


{% block content %}
<div class="analytics-container">
    
    <div class="metrics-row">
        
        <div class="card hydration-card">
            <div class="hydration-main">
                <div class="hydration-stats">
                    <h3>24h æ»šåŠ¨æ€»å¥¶é‡</h3>
                    <div id="rollingMilkDisplay" class="milk-count">-- <span class="unit">ml</span></div>
                    <div class="target-text">ç›®æ ‡: <span id="milkTargetDisplay">{{ milk_target }}</span>ml</div>
                </div>
                <div class="hydration-visuals-wrapper">
                    <div class="liquid-container">
                        <div id="liquidLevel" class="liquid"></div>
                    </div>
                    <div class="pie-container">
                        <canvas id="milkTypeChart"></canvas>
                    </div>
                </div>
            </div>
            <p id="hydrationAdvice" class="hydration-advice">æ­£åœ¨è®¡ç®—è¡¥æ°´å»ºè®®...</p>
        </div>

        <div class="card sleep-rolling-card">
            <div class="sleep-main">
                <div class="sleep-stats">
                    <h3>24h æ»šåŠ¨æ€»ç¡çœ </h3>
                    <div id="rollingSleepDisplay" class="sleep-count">-- <span class="unit">h</span></div>
                    <div class="target-text">ç›®æ ‡: 12-14h</div>
                </div>
                <div class="sleep-visual">
                    <span id="sleepMoon" class="moon-icon">ğŸŒ™</span>
                </div>
            </div>
            <p id="sleepAdvice" class="sleep-advice">æ­£åœ¨åˆ†æç¡çœ è´¨é‡...</p>
        </div>
        
    </div> 
    <div class="card chart-card full-width">
        <div class="card-header">
            <h3>ğŸ“ˆ é…æ–¹å¥¶å æ¯”è¶‹åŠ¿ (å†å²å…¨çºªå½•)</h3>
            <p class="subtitle">ç›‘æµ‹æ¯ä¹³ä¸é…æ–¹å¥¶çš„ç»“æ„å˜åŒ–</p>
        </div>
        <div class="chart-wrapper" style="height: 250px;">
            <canvas id="formulaTrendChart"></canvas>
        </div>
    </div>
    <div class="card chart-card full-width">
    <div class="card-header">
        <h3>ğŸ•°ï¸ ç”Ÿç‰©é’Ÿæ¼‚ç§»ç›‘æµ‹ (PST åŸºå‡†)</h3>
        <p class="subtitle">è¿½è¸ªé¦–ä¸ªé•¿ç¡çœ  (>3h) çš„èµ·å§‹ç‚¹å˜åŒ–</p>
    </div>
    <div class="chart-wrapper" style="height: 300px;">
        <canvas id="bioClockChart"></canvas>
    </div>
</div>

</div>

<script id="patterns-data" type="application/json">{{ patterns_json|safe }}</script>
<script type="module" src="{% static 'js/analytics_main.js' %}"></script>
{% endblock %}