{% load static %}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–½èˆ’ç±³ Tracker Pro</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>

<div class="app-wrapper">
    <header>
        <h1>ğŸ‘¶ æ–½èˆ’ç±³ Tracker</h1>
    </header>

    <div class="main-container">
        <div class="left-col">
            <div class="card">
                <h3>ğŸ“ è®°å½•æ–°äº‹ä»¶</h3>
                <div class="input-group">
                    <label>é€‰æ‹©æ—¥æœŸ</label>
                    <input type="date" id="currentDate">
                </div>

                <div class="btn-grid">
                    <button class="btn-milk" onclick="addAction('å–å¥¶')">ğŸ¼ å–å¥¶</button>
                    <button class="btn-sleep" onclick="addAction('ç¡çœ ')">ğŸ˜´ ç¡çœ </button>
                    <button class="btn-diaper" onclick="addAction('æ¢å°¿å¸ƒ')">ğŸ§· å°¿å¸ƒ</button>
                </div>

                <div id="dynamicInputs" class="dynamic-inputs-area"></div>
            </div>

            <div class="card log-card">
    <h3>ğŸ“‹ æœ€è¿‘ 5 å¤©è®°å½•</h3>
    <div id="entries">
        {% if past_days_data %}
            {% for day in past_days_data %}
                <div class="day-group" style="margin-bottom: 20px;">
                    <div class="day-header" style="background: #f8f9fa; padding: 5px 10px; border-radius: 5px; font-weight: bold; color: #555;">
                        ğŸ“… {{ day.date }}
                    </div>
                    
                    {% for item in day.actions %}
                        <div class="entry-item">
                            <div>
                                <span class="time">[{{ item.time_start }}]</span>
                                <strong>{{ item.action }}</strong>
                                <span class="details">
                                    {% if item.type %} Â· {{ item.type }}{% endif %}
                                    {% if item.volume %} Â· {{ item.volume }}{% endif %}
                                </span>
                            </div>
                            <button class="btn-delete" onclick="deleteAction('{{ day.date }}', {{ forloop.counter0 }})">&times;</button>
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        {% else %}
            <p class="empty-msg">æš‚æ— è®°å½•</p>
        {% endif %}
    </div>
</div>
        </div>

        <div class="right-col">
            <div class="card ai-card">
                <h3>âœ¨ Gemini AI æ™ºèƒ½åˆ†æ</h3>
                <p class="subtitle">åŸºäºå…¨é‡æ•°æ®æä¾›é¢„æµ‹ä¸è§„å¾‹åˆ†æ</p>
                
                <textarea id="userQuery" placeholder="è¾“å…¥ç‰¹å®šé—®é¢˜ï¼ˆä¾‹å¦‚ï¼šæœ€è¿‘å¥¶é‡æœ‰å‡å°‘å—ï¼Ÿï¼‰æˆ–ä¿æŒç©ºç™½ä»¥è·å–æ·±åº¦å…¨é¡¹æŠ¥å‘Š..." rows="3"></textarea>
                
                <button class="btn-ai" id="aiBtn" onclick="generateInsights()">ğŸš€ è¿è¡Œ AI æ·±åº¦åˆ†æ</button>
                
                <div id="aiContent" class="ai-response-area" style="display: none;">
                    <div id="aiText">æ­£åœ¨è¯»å– æ–½èˆ’ç±³ çš„æˆé•¿è®°å½•...</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'script.js' %}"></script>
</body>
</html>